<%= page_title "avxplr - #{@user.username}'s profile" %>

<div class="large-8 columns av_user_profile">
  <div class="av_user_profile_wrapper av_wrapper clearfix">
    <section class="av_user_profile_image float-left">
      <% if @user.profile_image.url.present? %>
        <%= image_tag(@user.profile_image.thumb.url) %>
      <% end %>
    </section>
    <h3 class="av_heading av_user_profile_username">@<%= @user.username %></h3>
    <%= link_to 'Edit profile', edit_user_registration_path, class: 'av_i_edit' %>
  </div>

  <!-- Tabs  -->

  <ul class="tabs" data-tabs id="av_user_profile_tabs">
    <li class="tabs-title is-active"><a href="#av_user_profile_shots_tab" aria-selected="true">Shots</a></li>
    <li class="tabs-title"><a href="#av_user_profile_fav_tab">Favorites</a></li>
  </ul>

  <div class="tabs-content" data-tabs-content="av_user_profile_tabs">
    <!-- Posted shots tab -->
    <div class="tabs-panel is-active" id="av_user_profile_shots_tab">
      <p>Shots posted by the user.</p>
      <div class="row column large-up-3 av_profile_posted_shots_grid av_i_grid">
        <% @shots.each do |shot| %>
          <%= link_to shot_path(shot)  do %>
          <div class="column av_profile_posted_shots_item av_i_grid_item">
            <section class="av_i_image">
              <%  if shot.image.present? %>
                <%= image_tag(shot.image.thumb.url) %>
              <% else %>
                <%= image_tag('video.png') %>
              <% end %>
            </section>
            <section class="av_i_link"><%= "#id #{shot.id}" %></section>
          </div>
          <% end %>
        <% end %>
      </div>
    </div>

    <!-- Fav tab -->
    <div class="tabs-panel" id="av_user_profile_fav_tab">

      <!-- Fav Aircrafts -->
      <section class="av_user_profile_fav--aircrafts">
        <p>Favorite aircrafts</p>
        <div class="row column large-up-3 av_profile_fav_aircrafts_grid av_i_grid">
          <% @fav_aircrafts.each do |aircraft| %>
            <%= link_to aircraft_path(aircraft)  do %>
            <div class="column av_profile_fav_aircrafts_item av_i_grid_item">
              <section class="av_i_image">
                <%= image_tag(aircraft.image_front.thumb.url) %>
              </section>
              <section class="av_i_link"><%= aircraft.model %></section>
            </div>
            <% end %>
          <% end %>
        </div>
      </section>

<hr>
      <!-- Fav Shots -->
      <section class="av_user_profile_fav--shots">
        <p>Favorite shots</p>
        <div class="row column large-up-3 av_profile_posted_shots_grid av_i_grid">
          <% @fav_shots.each do |shot| %>
            <%= link_to shot_path(shot)  do %>
            <div class="column av_profile_posted_shots_item av_i_grid_item">
              <section class="av_i_image">
                <%  if shot.image.present? %>
                  <%= image_tag(shot.image.thumb.url) %>
                <% else %>
                  <%= image_tag('video.png') %>
                <% end %>
              </section>
              <section class="av_i_link"><%= "#id #{shot.id}" %></section>
            </div>
            <% end %>
          <% end %>
        </div>
      </section>
    </div>
  </div>
</div>
